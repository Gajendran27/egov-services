
server{
		listen 80;
		resolver 127.0.0.1:53 ipv6=off;
		underscores_in_headers on;
	        gzip on;
        	gzip_proxied any;
	        gzip_types text/plain text/xml text/css application/json application/x-javascript text/javascript;
	        gzip_vary on;
       		gzip_disable "MSIE [1-6]\.(?!.*SV1)";
	        gzip_comp_level 6;
        	gzip_buffers 16 8k;
	        gzip_min_length 512;
        set $pgr_web http://pgr-web;
		set $api_gateway http://zuul;
		set $swm_services http://swm-services;
		set $asset_services_maha http://asset-services-maha;
		set $egov_idgen http://egov-idgen;
		set $egov_location http://egov-location;
		set $egov_mdms_service	http://egov-mdms-service;
		set $hr_employee http://hr-employee;
		set $hr_masters http://hr-masters;

	location / {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $pgr_web:80;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
	}

    location /pgr-web {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $pgr_web:80;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
    }

	location /swm-services {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $swm_services:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
	}

        location /asset-services-maha {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $asset_services_maha:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
        }

        location /hr-employee {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $hr_employee:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
        }

        location /hr-masters {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $hr_masters:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
        }

        location /egov-idgen {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $egov_idgen:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
        }

        location /egov-location {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $egov_location:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
        }

        location /egov-mdms-service {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $egov_mdms_service:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
        }


	location ~ ^/(pgr|localization|user|workflow|eis|user-otp|otp|asset-services|lams-services|egf-masters|egov-common-masters|egov-common-masterstest|hr-attendance|demand-services|egov-common-workflows|hr-leave|tenant|wcms/masters|pt-property|pt-calculator|pt-workflow|pgr-master|wcms-connection|billing-service|access|egov-integration|works-qualitycontrol|egf-bill|egov-mdms-create|egov-mdms-service-test|works-workorder|data-uploader|infra-search/egov-searcher|inventory-services|works-masters|perfmanagement|lcms-services|lcms-workflow|works-estimate|works-services|works-measurementbook|egov-persister|egov-indexer|egf-voucher-workflow|wcms-workflow|egf-voucher|tl-workflow|citizen-services|report|tl-services|tl-masters|egf-instrument|egf-master|pt-tax-enrichment|collection|hr-employee-movement|pt-user-enrichment|collection-services|collection-search-indexer)/ {
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        client_max_body_size 2M;
        proxy_pass $api_gateway:8080;
        proxy_pass_request_headers on;
        proxy_read_timeout 90;
      }

}

